<?php

namespace {{ class.className.namespace }};

use Doctrine\DBAL\Platforms\AbstractPlatform;
use Doctrine\DBAL\Types\StringType;

final class {{ class.className.name }} extends StringType
{
    public function getName(): string
    {
        return '{{ class.name }}';
    }

    public function convertToPHPValue(${{ class.className.forParameter }}, AbstractPlatform $platform): ?{{ class.valueObjectClassName.name }}
    {
        if (${{ class.className.forParameter }} === null) {
            return null;
        }

        return new {{ class.valueObjectClassName.name }}(${{ class.className.forParameter }});
    }

    public function convertToDatabaseValue(${{ class.className.forParameter }}, AbstractPlatform $platform): string
    {
        return ${{ class.className.forParameter }}->getValue();
    }
}
